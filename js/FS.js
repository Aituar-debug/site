function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}const form=document.getElementById("feedbackForm"),nameInput=document.getElementById("name"),emailInput=document.getElementById("email"),messageInput=document.getElementById("message"),nameError=document.getElementById("nameError"),emailError=document.getElementById("emailError"),messageError=document.getElementById("messageError"),formSuccess=document.getElementById("formSuccess"),demoVulnerable=document.getElementById("submissionDemo"),demoSecure=document.getElementById("secureDemo");form.addEventListener("submit",function(e){nameError.textContent="",emailError.textContent="",messageError.textContent="",formSuccess.textContent="",demoVulnerable.innerHTML="",demoSecure.textContent="";let t=!0,r=nameInput.value.trim(),n=emailInput.value.trim(),m=messageInput.value.trim();if(""===r&&(nameError.textContent="Пожалуйста, введите ваше имя.",t=!1),""===n?(emailError.textContent="Пожалуйста, введите email.",t=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(emailError.textContent="Пожалуйста, введите корректный email.",t=!1),""===m?(messageError.textContent="Пожалуйста, введите сообщение.",t=!1):m.length<10&&(messageError.textContent="Сообщение должно содержать как минимум 10 символов.",t=!1),!t){e.preventDefault();return}e.preventDefault(),demoVulnerable.innerHTML="<p>Имя: "+r+"</p><p>Email: "+n+"</p><p>Сообщение: "+m+"</p>",demoSecure.textContent="Имя: "+escapeHTML(r)+"; Email: "+escapeHTML(n)+"; Сообщение: "+escapeHTML(m),formSuccess.textContent="Спасибо! Ваше сообщение отправлено.",form.reset()});